(()=>{"use strict";var t={601:(t,e,n)=>{var r;n.r(e),n.d(e,{WIDTH:()=>i,HEIGHT:()=>o,TILE_SIZE:()=>a,ROWS:()=>s,COLS:()=>l,START:()=>u,CURRENT:()=>c,OPEN:()=>h,CLOSED:()=>f,END:()=>p,TOP:()=>y,RIGHT:()=>v,BOTTOM:()=>d,LEFT:()=>b,EMPTY:()=>T,getContext:()=>g});var i=320,o=640,a=16,s=i/a,l=o/a,u=(r=[1,2,3,4,5])[0],c=r[1],h=r[2],f=r[3],p=r[4],y=1,v=2,d=3,b=4,T=0;function g(){return document.getElementById("canvas").getContext("2d")}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t=n(601),e=t.TILE_SIZE,r=t.TOP,i=t.LEFT,o=t.RIGHT,a=t.BOTTOM,s=t.EMPTY;const l=function(){function t(e,n){this.x=e,this.y=n,this.f=-1,this.g=-1,this.h=-1,this.type=t.generateType(),this.step=0,this.color=0,this.parent=null,this.xPosition=this.xPosition.bind(this),this.yPosition=this.yPosition.bind(this),this.fullXPosition=this.fullXPosition.bind(this),this.fullYPosition=this.fullYPosition.bind(this)}return t.prototype.xPosition=function(){return this.x*e},t.prototype.fullXPosition=function(){return this.xPosition()+e},t.prototype.yPosition=function(){return this.y*e},t.prototype.fullYPosition=function(){return this.yPosition()+e},t.generateType=function(){var t=Math.random();return t<=.45?Math.random()>=.5?o:i:t<=.85?Math.random()>=.5?r:a:s},t.getDistance=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},t.isWall=function(t,e){return t.y<e.y?!(t.type!==a&&e.type!==r):t.y>e.y?!(t.type!==r&&e.type!==a):t.x<e.x?!(t.type!==o&&e.type!==i):t.x>e.x&&!(t.type!==i&&e.type!==o)},t.isOrigin=function(t,e){return 0===t&&0===e},t}();var u=n(601),c=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))},h=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function f(t,e,n,r){var i=(0,u.getContext)();i.beginPath(),i.moveTo(t,e),i.lineTo(n,r),i.stroke(),i.closePath()}function p(t){var e=(0,u.getContext)();Array.isArray(t)||(t=[t]),t.forEach((function(t){return e.fillRect(t.xPosition(),t.yPosition(),u.TILE_SIZE,u.TILE_SIZE)}))}function y(t,e,n){var r=this;return void 0===n&&(n=0),new Promise((function(i){return setTimeout((function(){return c(r,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:return t?(t(),[4,new Promise((function(t){return setTimeout(t,4*e)}))]):[3,2];case 1:r.sent(),r.label=2;case 2:return(0,u.getContext)().clearRect(0,0,u.WIDTH,u.HEIGHT),d.drawBoard(),n?[4,new Promise((function(t){return setTimeout(t,n)}))]:[3,4];case 3:r.sent(),r.label=4;case 4:return i(),[2]}}))}))}),e)}))}function v(){return c(this,void 0,void 0,(function(){var t,e,n,r,i,o,a;return h(this,(function(s){switch(s.label){case 0:t=function(t){var e;return h(this,(function(n){switch(n.label){case 0:return e=t.step,[4,y((function(){p(t);for(var n=function(t){var n,r;n=e,r=t,(0,u.getContext)().fillStyle="rgba(255, 255, 255, "+(1-.25*(n-r))+")",d.tiles.forEach((function(e){return p(e.filter((function(e){return e.step===t})))}))},r=e-1;r>=e-5&&r>=1;r--)n(r)}),13)];case 1:return n.sent(),[2]}}))},e=0,n=d.path,s.label=1;case 1:return e<n.length?(r=n[e],[5,t(r)]):[3,4];case 2:s.sent(),s.label=3;case 3:return e++,[3,1];case 4:i=0,o=d.path.slice().reverse(),s.label=5;case 5:return i<o.length?(p(o[i]),[4,y(null,12)]):[3,8];case 6:s.sent(),s.label=7;case 7:return i++,[3,5];case 8:a=0,s.label=9;case 9:return a<6?(p(d.path),[4,y(null,5===a?450:10,5===a?null:50)]):[3,12];case 10:s.sent(),s.label=11;case 11:return a++,[3,9];case 12:return[2]}}))}))}const d=new(function(){function t(){this.tiles=[[new l(0,0)]],this.resetBoard()}return t.invalidPos=function(t,e){return t<0||t>=u.ROWS||e<0||e>=u.COLS},t.prototype.getTile=function(e,n){return t.invalidPos(e,n)?null:this.tiles[e][n]},t.prototype.resetBoard=function(){this.tiles=new Array(u.ROWS).fill(new Array(u.COLS).fill(1)),this.tiles=this.tiles.map((function(t,e){return t.map((function(t,n){return new l(e,n)}))})),this.available=[],this.unavailable=[],this.start=this.getTile(Math.floor(u.ROWS/2),0),this.available.push(this.start),this.drawBoard()},t.prototype.forEachTile=function(t){this.tiles.forEach((function(e){return e.forEach((function(e){return t(e)}))}))},t.prototype.drawBoard=function(){this.forEachTile((function(t){return function(t){var e=(0,u.getContext)(),n=t.xPosition,r=t.fullXPosition,i=t.yPosition,o=t.fullYPosition;e.fillStyle="white";var a={};switch(t.type){case u.TOP:a={x:n(),y:i(),toX:r(),toY:i()};break;case u.RIGHT:a={x:r(),y:i(),toX:r(),toY:o()};break;case u.BOTTOM:a={x:n(),y:o(),toX:r(),toY:o()};break;case u.LEFT:a={x:n(),y:i(),toX:n(),toY:o()}}f(a.x,a.y,a.toX,a.toY),t.color!==u.EMPTY&&(function(t){var e=(0,u.getContext)();switch(t.color){case u.START:e.fillStyle="green";break;case u.END:case u.CLOSED:e.fillStyle="red";break;case u.OPEN:e.fillStyle="yellow";break;case u.CURRENT:e.fillStyle="violet";break;default:e.fillStyle="violet"}}(t),p(t))}(t)})),f(0,0,0,u.HEIGHT),f(u.WIDTH,0,u.WIDTH,u.HEIGHT)},t.isOn=function(t,e){return t.find((function(t){return t===e}))},t.prototype.setNextTile=function(){this.current=this.available.pop(),this.unavailable.push(this.current)},t.prototype.invalidMove=function(e,n,r){var i=this.getTile(e.x+n,e.y+r);return!(!l.isOrigin(n,r)&&i)||l.isWall(e,i)||t.isOn(this.unavailable,i)||t.isOn(this.available,i)},t.prototype.generatePath=function(){for(this.path=[this.available[this.available.length-1]],this.current=this.path[0];null!==this.current.parent;)this.path.push(this.current.parent),this.current=this.current.parent;this.path=this.path.reverse()},t.prototype.addToOpen=function(t){if(t.parent=this.current,t.g=l.getDistance(this.start,t),t.h=0,t.f=t.g+t.h,t.step=t.parent.step+1,this.available.push(t),t.y===u.COLS-1)return this.generatePath(),!0},t}());function b(t,e){if(d.invalidMove(d.current,t,e))return!1;var n=d.getTile(d.current.x+t,d.current.y+e);return!!d.addToOpen(n)}function T(){d.setNextTile();for(var t=1;t>=-1;t--)if(b(0,t)||b(t,0))return!0;return d.available.sort((function(t,e){return t.f>e.f?-1:1})),!1}!function t(){var e=document.getElementById("canvas");for(e.width=u.WIDTH,e.height=u.HEIGHT,e.getContext("2d").strokeStyle="white",document.getElementById("run").addEventListener("click",v),document.getElementById("reset").addEventListener("click",t),d.resetBoard();d.available.length>=1&&!T(););if(0===d.available.length)return t()}()})()})();